/*
angular-linkify - v1.2.0 - 11/3/2015
Angular filter to linkify urls, "@" usernames, and hashtags.
Copyright (c) 2015 ; Licensed  
*/
angular.module("linkify",[]).filter("linkify",function(){"use strict";function linkify(_str,type){if(_str){var _text=_str.replace(/(?:https?\:\/\/)+(?![^\s]*?")([\w.,@?!^=%&amp;:\/~+#-]*[\w@?!^=%&amp;\/~+#-])?/gi,function(url){var wrap=document.createElement("div"),anch=document.createElement("a");return anch.href=url,anch.target="_blank",anch.innerHTML=url,wrap.appendChild(anch),wrap.innerHTML});return _text?("twitter"===type&&(_text=_text.replace(/(|\s)*@([\w]+)/g,'$1<a href="https://twitter.com/$2" target="_blank">@$2</a>'),_text=_text.replace(/(^|\s)*[#＃]([^#＃\s!@$%^&*()+\-=\[\]{};':"\\|,.<>\/?\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u300c\u300d\u300e\u300f\u2018\u2019\u201c\u201D\uff08\uff09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uff0e\u300a\u300B\u3008\u3009]+)/g,'$1<a href="https://twitter.com/search?q=%23$2" target="_blank">#$2</a>')),"instagram"===type&&(_text=_text.replace(/(|\s)*@([\w\.]+)/g,'$1<a href="https://instagram.com/$2" target="_blank">@$2</a>'),_text=_text.replace(/(^|\s)*[#＃]([^#＃\s!@$%^&*()+\-=\[\]{};':"\\|,.<>\/?\u3002\uff1f\uff01\uff0c\u3001\uff1b\uff1a\u300c\u300d\u300e\u300f\u2018\u2019\u201c\u201D\uff08\uff09\u3014\u3015\u3010\u3011\u2014\u2026\u2013\uff0e\u300a\u300B\u3008\u3009]+)/g,'$1<a href="https://instagram.com/explore/tags/$2" target="_blank">#$2</a>')),"weibo"===type&&(_text=_text.replace(/(|\s)*@([\u4e00-\u9fa5\w-]+)/g,'$1<a href="http://weibo.com/n/$2" target="_blank">@$2</a>'),_text=_text.replace(/(^|\s)*#([^#]+)#/g,function(str,$1,$2){return str=str||"",$1=$1||"",$2=$2||"",$1+'<a href="http://huati.weibo.com/k/'+$2.replace(/\[([\u4e00-\u9fa5]*\])/g,"")+'" target="_blank">#'+$2+"#</a>"})),_text):""}}return linkify}).directive("linkify",["$filter","$timeout",function($filter,$timeout){"use strict";return{restrict:"A",link:function(scope,element,attrs){var type=attrs.linkify||"normal";$timeout(function(){element.html($filter("linkify")(element.html(),type))})}}}]);